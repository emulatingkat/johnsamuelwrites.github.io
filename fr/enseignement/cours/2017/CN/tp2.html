<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Language" content="en"/>
    <link rel="shortcut icon" href="../../images/logo/favicon.png"/>
    <title>Chimie et Numérique: John Samuel</title>
    <style type="text/css">
    body{
      background-color: #FFFFFF;
    }
    #sidebar {
      position: fixed;
      background-color: #00363a;
      top: 0;
      left: 0;
      bottom: 0;
      width:25vw;
    }
    .title {
      position:relative;
      text-align: center;
      line-height: 9vh;
      font-size: 1.5vmax;
      font-family: 'Arial';
      margin-top: 30vh;
    }
    .title a:link, 
    .title a:visited{
     color: #FFFFFF;
     text-decoration:none;
    }
    .subtitle {
      top: 30vh;
      text-align: center;
      line-height: 1.3em;
      font-family: 'Arial';
      font-size: 1.5vmax;
      color: #FFFFFF;
    }
    a:link, a:visited {
     color:#00363a;
    }
    .subtitle a:link,
    .subtitle a:visited{
     color: #FFFFFF;
     text-decoration:none;
    }
    .licence {
      position:fixed;
      text-align: right;
      bottom:0;
      right:0;
    }
    .home {
     font-family: 'Arial';
     text-align: left;
    }
    .codeexample {
      background-color:#eeeeee;
    }
    .home ul{
      margin: 0;
      padding: 0;
      text-align: left;
      list-style:none;
    }
    .home li{
     position: relative;
     float: left;
     margin-right: 1em;
    }
    .content {
     line-height: 1.6em;
     font-size: 1.3em;
     font-family: 'Arial';
     margin-top: 8vh;
    }
    .content h3,h2,h4{
     color:#00363a;
    }
    .exercise {
     margin-left:2vw;
    }
    .exercise p{
     margin-left:1vw;
    }
    .exercise img{
     width:100%;
    }
    .content a:link,
    .content a:visited{
     color:#00363a;
    }
    .home a:link,
    .home a:visited{
     color: #D3D3D3;
    }
    .page {
      width:65vw;
      height:100%;
      margin-left:25vw;
      overflow: auto;
      padding: 0 1em;
    }
    img {
     max-width:100%;
     max-height:100%;
    }
  </style>
  </head>
  <body vocab="http://schema.org/">
    <div id="sidebar">
     <div class="title">
      <h1><a href="./index.html">Travaux Pratiques: Chimie et Numérique</a></h1>
     </div>
     <div class="subtitle">
      <h3><a href="../../../../apropos.html">John Samuel</a></h3>
     </div>
    </div>
    <div class="licence"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="./../../../../../images/license.png"/></a>
    </div>
    <div class="page">
      <div class="home">
       <ul typeof="BreadcrumbList">
        <li property="itemListElement" typeof="ListItem">
          <a property="item" typeof="WebPage" href="../../../../index.html">
            <span property="name">Accueil</span>
          </a>
        </li>
        <li property="itemListElement" typeof="ListItem">
         <a property="item" typeof="WebPage" href="index.html">
          <span property="name">Chimie et Numérique</span>
         </a>
        </li>
        <li property="itemListElement" typeof="ListItem">
         <a property="item" typeof="WebPage" href="../../../index.html">
          <span property="name">Enseignement</span>
         </a>
        </li>
       </ul>
      </div>
      <div class="content">
        <h3>Objectifs</h3>
        <ul>
          <li>Introduction de numpy, matplotlib et pandas</li>
          <li>Manipulation des fichiers CSV et JSON</li>
          <li>Analyse des données</li>
        </ul>
        <h3>Evaluation</h3>
        <p>Chaque exercice a un niveau de difficulté. Les exercices faciles et de difficulté moyenne vous aident pour comprendre les fondamentaux. Il est recommandé de finir ces exercices avant de commencer les exercices difficiles. Le niveau de difficulté de l'exercice:</p>
        <ol>
          <li><span style="color:red">&#9733;</span>: Facile</li>
          <li><span style="color:red">&#9733;&#9733;</span>: Moyen</li>
          <li><span style="color:red">&#9733;&#9733;&#9733;</span>: Difficile</li>
        </ol>
        <h4>Exercice 1 <span style="color:red">&#9733;</span></h4>
        <div class="exercise">
          <h5>1. Version de numpy</h5>
          <p class="codeexample">
            <code>
              import numpy</br>
              </br>
              print(numpy.__version__)</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              print(np.__version__)</br>
            </code>
          </p>
          <h5>2. Tableau</h5>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([1, 2, 3, 4])</br>
              </br>
              print(a)</br>
              print(type(a))</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([1, 2, 3, 4])</br>
              </br>
              print(a.shape)</br>
            </code>
          </p>
          <h5>3. Tableau à deux dimensions</h5>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([[1, 2, 3, 4], [5,6,7,8]])</br>
              </br>
              print(a.shape)</br>
            </code>
          </p>
          <h5>4. Tableau à trois dimensions</h5>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([[[1, 2], [5,6]], [[1, 2], [5,6]]])</br>
              </br>
              print(a.shape)</br>
              print(a.ndim)</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([[[1, 2], [5,6]], [[1, 2], [5,6]]])</br>
              </br>
              print(a.dtype)</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([[[1.1, 2.2], [5.3,6.4]], [[1.4, 2.5], [5.5,6.4]]])</br>
              </br>
              print(a.dtype)</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([[[1.1, 2.2], [5.3,6.4]], [[1.4, 2.5], [5.5,6.4]]])</br>
              </br>
              print(a.ndim)</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([[[1.1, 2.2], [5.3,6.4]], [[1.4, 2.5], [5.5,6.4]]])</br>
              </br>
              print(a.itemsize)</br>
            </code>
          </p>
          <h5>5. Opérations</h5>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([[1, 2], [3, 4]])</br>
              b = np.array([[4, 5], [6, 7]])</br>
              </br>
              c = a + b</br>
              print(c)</br>
              </br>
              c = a - b</br>
              print(c)</br>
              </br>
              c = a * b</br>
              print(c)</br>
              </br>
              d = np.dot(a, b)</br>
              print(d)</br>
            </code>
          </p>
          <h5>6. Forme</h5>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              a = np.array([1,2,3,4,5,6,7,8])</br>
              print(a)</br>
              print(a.shape)</br>
              </br>
              b = a.reshape(4,2)</br>
              print(b)</br>
              print(b.shape)</br>
              </br>
              b = a.reshape(2,4)</br>
              print(b)</br>
              print(b.shape)</br>
              </br>
              b = a.reshape(2,2,2)</br>
              print(b)</br>
              print(b.shape)</br>
            </code>
          </p>
        </div>
        <h4>Exercice 2 <span style="color:red">&#9733;&#9733;</span></h4>
        <div class="exercise">
          <p>1. Graphique avec matplotlib</p>
          <p class="codeexample">
            <code>
              import matplotlib.pyplot as plt</br>
              import numpy as np</br>
              </br>
              a = np.array([1,2,3,4,5,6,7,8])</br>
              b = np.array([1,2,3,4,5,6,7,8])</br>
              plt.plot(a,b)</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import matplotlib.pyplot as plt</br>
              import numpy as np</br>
              </br>
              a = np.array([1,2,3,4,5,6,7,8])</br>
              b = np.array([1,4,9,16,25,36,49,64])</br>
              plt.plot(a,b)</br>
            </code>
          </p>
          <p>2. Lecture de fichiers CSV et tracer les données.</p>
          <p>Copier ce <a href="../../../../../en/teaching/courses/2017/DataMining/population.csv">fichier CSV</a> dans votre répertoire. Le fichier contient la population entre 1901 et 2016. Tracer un graphique.</p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              dataset = np.loadtxt("population.csv", dtype={'names': ('year', 'population'), 'formats': ('i4', 'i')},</br>
              &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              print(dataset) </br>
            </code>
          </p>
          <p>Exécutez le code ci-dessous et comparez la différence.</p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              year, population = np.loadtxt("population.csv", dtype={'names': ('year', 'population'), 'formats': ('i4', 'i')},</br>
              &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8", unpack= True)</br>
              </br>
              print(year)</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import matplotlib.pyplot as plt</br>
              </br>
              year, population = np.loadtxt("population.csv", dtype={'names': ('year', 'population'), 'formats': ('i4', 'i')},</br>
                 skiprows=1, delimiter=",", encoding="UTF-8", unpack= True)</br>
              </br>
              plt.plot(year, population)</br>
              plt.show()</br>
            </code>
          </p>
          <p>3. Diagramme en barres</p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import matplotlib.pyplot as plt</br>
              </br>
              year, population = np.loadtxt("population.csv", dtype={'names': ('year', 'population'), 'formats': ('i4', 'i')},</br>
                 skiprows=1, delimiter=",", encoding="UTF-8", unpack= True)</br>
              </br>
              plt.bar(year, population)</br>
              plt.show()</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import matplotlib.pyplot as plot</br>
              </br>
              x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</br>
              y = [0, 1, 0, 0, 1, 0, 1, 1, 1, 0]</br>
              plot.plot(x, y, linewidth=3, drawstyle="steps", color="#00363a")</br>
              plot.show()</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import matplotlib.pyplot as plt</br>
              </br>
              year, population = np.loadtxt("population.csv", dtype={'names': ('year', 'population'), 'formats': ('i4', 'i')},</br>
              &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8", unpack= True)</br>
              </br>
              plt.plot(year, population, linewidth=3, drawstyle="steps", color="#00363a")</br>
              plt.show()</br>
            </code>
          </p>
        </div>
        <h4>Exercice 3 <span style="color:red">&#9733;&#9733;</span></h4>
        <div class="exercise">
          <p>1. Manipulation des données</p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              dataset = np.loadtxt("population.csv", dtype={'names': ('year', 'population'), 'formats': ('i4', 'i')},</br>
              &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              print(dataset[:]['year']) </br>
              print(dataset[:]['population']) </br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              dataset = np.loadtxt("population.csv", dtype={'names': ('year', 'population'), 'formats': ('i4', 'i')},</br>
              &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              print(dataset[0:10]['year']) </br>
            </code>
          </p>
          <p>2. Analyse des données</p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              dataset = np.loadtxt("population.csv", dtype={'names': ('year', 'population'), 'formats': ('i4', 'i')},</br>
              &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              population = dataset[:]['population']</br>
              print(population.max())</br>
              print(population.min())</br>
              print(population.mean())</br>
              print(population.std())</br>
              print(population.sum())</br>
            </code>
          </p>
          <p>
           <img src="../../../../../en/teaching/courses/2017/DataMining/images/wikidataquery.png">
          </p>
          <p class="codeexample">
            <code>
              SELECT DISTINCT ?countryLabel ?year ?population</br>
              WHERE {</br>
              &nbsp;?country wdt:P31 wd:Q6256; #Country</br>
              &nbsp;&nbsp;  p:P1082 ?populationStatement;</br>
              &nbsp;&nbsp;  rdfs:label ?countryLabel. #Label</br>
              &nbsp;?populationStatement ps:P1082 ?population; #population</br>
              &nbsp;pq:P585 ?date. #period in time</br>
              &nbsp;FILTER(lang(?countryLabel)="en") #Label in English</br>
              &nbsp;BIND(YEAR(?date) as ?year)</br>
              &nbsp;FILTER(?year>2000)</br>
              }</br>
              ORDER by ?countryLabel ?year</br>
            </code>
          </p>
          <p>
           Voici une requête SPARQL. Exécutez cette requête sur <a href="https://query.wikidata.org">Wikidata</a> et téléchargez les résultats en format CSV en nommant le fichier countrypopulation.csv.
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
              &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
              &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              print(dataset)</br>
            </code>
          </p>
          <h5>3. Sélection de données</h5>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
               &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
               &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              </br>
              print(dataframe['year'].value_counts())</br>
              print(dataframe['countryLabel'].value_counts())</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'),</br>
                'formats': ('&lt;U100', 'i4', 'i')},</br>
                skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              print(dataframe.loc[dataframe['year']==2017])</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'),</br>
                'formats': ('&lt;U100', 'i4', 'i')},</br>
                skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              print(dataframe.loc[dataframe['countryLabel'] =="Sweden"])</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'),</br>
                'formats': ('&lt;U100', 'i4', 'i')},</br>
                skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              print(dataframe.loc[(dataframe['year']==2017) & (dataframe['countryLabel'] =="Sweden")])</br>
            </code>
          </p>
        </div>
        <h4>Exercice 4 <span style="color:red">&#9733;&#9733;&#9733;</span></h4>
        <div class="exercise">
          <h5>1. Groupement de résultat</h5>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
                &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
                &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              </br>
              groups = dataframe.groupby(['countryLabel']).groups</br>
              print(groups.keys())</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
                &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
                &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              </br>
              groups = dataframe.groupby(['countryLabel'])</br>
              print(groups.first())</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
               &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
               &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              </br>
              groups = dataframe.groupby(['countryLabel'])</br>
              print(groups.last())</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
                &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
                &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              </br>
              groups = dataframe.groupby(['countryLabel'])</br>
              print(groups['population'].max())</br>
              print(groups['population'].min())</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
                &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
                &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              </br>
              groups = dataframe.groupby(['countryLabel'], as_index=False)</br>
              print(groups.agg({'population' : max}))</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
                &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
                &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              </br>
              groups = dataframe.groupby(['countryLabel'], as_index=False)</br>
              print(groups.agg({'population' : min}))</br>
            </code>
          </p>
          <p class="codeexample">
            <code>
              import numpy as np</br>
              import pandas as pd</br>
              </br>
              dataset = np.loadtxt("countrypopulation.csv", dtype={'names': ('countryLabel', 'year', 'population'), </br>
                &nbsp;&nbsp;'formats': ('&lt;U100', 'i4', 'i')},</br>
                &nbsp;&nbsp;skiprows=1, delimiter=",", encoding="UTF-8")</br>
              </br>
              dataframe = pd.DataFrame(dataset, columns=['countryLabel', 'year', 'population'])</br>
              </br>
              groups = dataframe.groupby(['year'], as_index=False)</br>
              print(groups.agg({'population' : max}))</br>
            </code>
          </p>
          <p>
           <b>Question 1</b>: Exécutez le requête SPARQL ci-dessus sur <a href="https://query.wikidata.org">Wikidata</a> et cette fois téléchargez les résultats en format JSON en nommant le fichier countrypopulation.json. Codez en Python afin d'avoir les résultats suivants:
          </p>
          <ul>
            <li>Visualisez la population de tous les pays</li>
            <li>Calculez la population moyenne de chaque pays</li>
            <li>Calculez la population moyenne de chaque année</li>
          </ul>
        </div>
      </div>
  </body>
</html>
